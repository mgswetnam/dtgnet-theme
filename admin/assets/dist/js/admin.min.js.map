{"version":3,"sources":["admin.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","jQuery","document","ready","$","console","log","id_prefix","attr","replace","name_prefix","thefields","refresh_functions","each","mylinknum","this","closest","data","off","on","remove_link","linknum","is","prevnum","insertBefore","renumber_links","move_link_up","nextnum","insertAfter","move_link_down","confirm","remove","childNodes","nodeValue","add_element","theelement","thedata","JSON","parse","index","createElement","type","theatts","atts","thekeys","Object","keys","mykey","k","v","addClass","html","content","preventDefault","last","fieldset","deletebtn","deletewrap","append","upbtn","upwrap","downbtn","downwrap","legend","wrapper","toLowerCase","label","input"],"mappings":"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","file":"admin.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\n\n/*import 'custom/filters.js'; */\n\n/*\n * csa_admin v1.0\n * -------------------\n * Copyright (c) 2019 Matthew Swetnam\n */\njQuery(document).ready(function ($) {\n  console.log(\"Canadensis Admin\");\n\n  if ($(\".widget-liquid-right .csa-featured-links.text-field.link-heading\").length) {\n    var id_prefix = $(\".widget-liquid-right .csa-featured-links.text-field.link-heading\").attr(\"id\").replace(\"heading\", \"\");\n    var name_prefix = $(\".widget-liquid-right .csa-featured-links.text-field.link-heading\").attr(\"name\").replace(\"[heading]\", \"\");\n    var thefields = [\"Title\", \"Desc\", \"URL\", \"Icon\"];\n    refresh_functions();\n  }\n\n  $(\".csa-featured-links.form-button\").on(\"click\", function (e) {\n    e.preventDefault();\n\n    if ($(\".csa-featured-link\").length == 0) {\n      linknum = \"1\";\n    } else {\n      linknum = $(\".csa-featured-link\").last().data(\"link-number\");\n      linknum++;\n    } // Render fields\n\n\n    var fieldset = add_element('[{\"type\":\"fieldset\",\"atts\":[{\"id\":\"csa-featured-link|' + linknum + '\",\"class\":\"csa-admin csa-featured-link\",\"data-link-number\":\"' + linknum + '\"}],\"content\":\"\" }]');\n    var deletebtn = add_element('[{\"type\":\"i\",\"atts\":[{\"id\":\"csa-remove-link-' + linknum + '\",\"class\":\"csa-remove-link dashicons dashicons-dismiss\"}],\"content\":\"\" }]');\n    $(deletebtn).on(\"click\", function () {\n      remove_link(linknum);\n    });\n    var deletewrap = add_element('[{\"type\":\"span\",\"atts\":[{}],\"content\":\"\" }]');\n    $(deletewrap).append(deletebtn);\n    var upbtn = add_element('[{\"type\":\"i\",\"atts\":[{\"id\":\"csa-up-link-' + linknum + '\",\"class\":\"csa-up-link dashicons dashicons-arrow-up-alt2\"}],\"content\":\"\" }]');\n    var upwrap = add_element('[{\"type\":\"span\",\"atts\":[{}],\"content\":\"\" }]');\n    $(upwrap).append(upbtn);\n    var downbtn = add_element('[{\"type\":\"i\",\"atts\":[{\"id\":\"csa-down-link-' + linknum + '\",\"class\":\"csa-down-link dashicons dashicons-arrow-down-alt2\"}],\"content\":\"\" }]');\n    var downwrap = add_element('[{\"type\":\"span\",\"atts\":[{}],\"content\":\"\" }]');\n    $(downwrap).append(downbtn);\n    var legend = add_element('[{\"type\":\"legend\",\"atts\":[{\"class\":\"csa-link-name\"}],\"content\":\"Link ' + linknum + ' \" }]');\n    $(legend).append(deletewrap, upwrap, downwrap);\n    $(fieldset).append(legend);\n    $.each(thefields, function (k, v) {\n      var wrapper = add_element('[{\"type\":\"div\",\"atts\":[{\"class\":\"field-wrapper ' + v.toLowerCase() + '-wrap\"}],\"content\":\"\" }]');\n      var label = add_element('[{\"type\":\"label\",\"atts\":[{\"for\":\"' + id_prefix + v.toLowerCase() + '-' + linknum + '\"}],\"content\":\"' + v + '\" }]');\n      var input = add_element('[{\"type\":\"input\",\"atts\":[{\"id\":\"' + id_prefix + v.toLowerCase() + '-' + linknum + '\",\"name\":\"' + name_prefix + '[' + v.toLowerCase() + '][]\",\"class\":\"\",\"size\":\"40\"}],\"content\":\"\" }]');\n      $(label).append(input);\n      $(wrapper).append(label);\n      $(fieldset).append(wrapper);\n    });\n    $(\".csa-admin.csa-featured-link-wrapper\").append(fieldset);\n  });\n\n  function refresh_functions() {\n    $(\"i[id^='csa-remove-link-']\").each(function () {\n      var mylinknum = $(this).closest(\"fieldset\").data(\"link-number\");\n      $(this).off(\"click\").on(\"click\", function () {\n        remove_link(mylinknum);\n      });\n    });\n    $(\"i[id^='csa-up-link-']\").each(function () {\n      var mylinknum = $(this).closest(\"fieldset\").data(\"link-number\");\n      $(this).off(\"click\").on(\"click\", function () {\n        move_link_up(mylinknum);\n      });\n    });\n    $(\"i[id^='csa-down-link-']\").each(function () {\n      var mylinknum = $(this).closest(\"fieldset\").data(\"link-number\");\n      $(this).off(\"click\").on(\"click\", function () {\n        move_link_down(mylinknum);\n      });\n    });\n  }\n\n  function remove_link(linknum) {\n    if (confirm(\"Are you sure you want to delete link \" + linknum + \"? NOTICE: CHANGE WILL ONLY BECOME PERMANENT ONCE THE WIDGET IS SAVED.\")) {\n      $(\"fieldset[id='csa-featured-link|\" + linknum + \"'\").remove();\n      renumber_links();\n    }\n  }\n\n  function move_link_up(linknum) {\n    if ($(\"fieldset[id='csa-featured-link|\" + linknum).is(':not(:first-child)')) {\n      var prevnum = linknum - 1;\n      $(\"fieldset[id='csa-featured-link|\" + linknum).insertBefore(\"fieldset[id='csa-featured-link|\" + prevnum);\n      renumber_links();\n    }\n  }\n\n  function move_link_down(linknum) {\n    if ($(\"fieldset[id='csa-featured-link|\" + linknum).is(':not(:last-child)')) {\n      var nextnum = linknum + 1;\n      $(\"fieldset[id='csa-featured-link|\" + linknum).insertAfter(\"fieldset[id='csa-featured-link|\" + nextnum);\n      renumber_links();\n    }\n  }\n\n  function renumber_links() {\n    var i = 1;\n    $(\"fieldset[id^='csa-featured-link|\").each(function () {\n      $(this).data(\"link-number\", i);\n      $(this).attr(\"data-link-number\", i);\n      $(this).attr(\"id\", \"csa-featured-link|\" + i);\n      $(\"legend\", this)[0].childNodes[0].nodeValue = \"Link \" + i;\n      $(\"i[id^='csa-remove-link-']\", this).attr(\"id\", \"csa-remove-link-\" + i);\n      $(\"i[id^='csa-up-link-']\", this).attr(\"id\", \"csa-up-link-\" + i);\n      $(\"i[id^='csa-down-link-']\", this).attr(\"id\", \"csa-down-link-\" + i);\n      $(\"label[for^='\" + id_prefix + \"title-']\", this).attr(\"for\", id_prefix + \"title-\" + i);\n      $(\"input[id^='\" + id_prefix + \"title-']\", this).attr(\"id\", id_prefix + \"title-\" + i);\n      $(\"label[for^='\" + id_prefix + \"desc-']\", this).attr(\"for\", id_prefix + \"desc-\" + i);\n      $(\"input[id^='\" + id_prefix + \"desc-']\", this).attr(\"id\", id_prefix + \"desc-\" + i);\n      $(\"label[for^='\" + id_prefix + \"url-']\", this).attr(\"for\", id_prefix + \"url-\" + i);\n      $(\"input[id^='\" + id_prefix + \"url-']\", this).attr(\"id\", id_prefix + \"url-\" + i);\n      $(\"label[for^='\" + id_prefix + \"icon-']\", this).attr(\"for\", id_prefix + \"icon-\" + i);\n      $(\"input[id^='\" + id_prefix + \"icon-']\", this).attr(\"id\", id_prefix + \"icon-\" + i);\n      i++;\n    });\n    refresh_functions();\n  }\n\n  function add_element(data) {\n    var thedata = JSON.parse(data);\n    var theelement;\n    $.each(thedata, function (index) {\n      theelement = document.createElement(thedata[index].type);\n      var theatts = thedata[index].atts;\n      $.each(theatts, function (i) {\n        var thekeys = Object.keys(theatts[i]);\n        $.each(thekeys, function (mykey) {\n          var k = thekeys[mykey];\n          var v = theatts[i][thekeys[mykey]];\n\n          if (k === \"class\") {\n            $(theelement).addClass(v);\n          } else {\n            $(theelement).attr(k, v);\n          }\n        });\n      });\n      $(theelement).html(thedata[index].content);\n    });\n    return theelement;\n  }\n});\n\n},{}]},{},[1]);\n"]}